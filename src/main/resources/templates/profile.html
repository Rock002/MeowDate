<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/base}">
<head>
    <title>–ü—Ä–æ—Ñ–∏–ª—å</title>

    <th:block layout:fragment="styles">
        <style>
            .profile-header {
                margin-bottom: 30px;
            }

            .profile-name {
                font-size: 28px;
                margin-bottom: 10px;
            }

            .profile-details {
                color: #666;
                font-size: 16px;
                margin-bottom: 20px;
            }

            .profile-details span {
                display: inline-block;
                margin-right: 15px;
            }

            .photos-section {
                margin-top: 40px;
            }

            .section-title {
                font-size: 20px;
                margin-bottom: 15px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .photos-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 15px;
            }

            .photo-item {
                width: 100%;
                height: 200px;
                object-fit: cover;
                border-radius: 8px;
                background: #f5f5f5;
            }

            .edit-btn {
                background: #333;
                color: white;
                border: none;
                padding: 8px 20px;
                border-radius: 4px;
                font-size: 14px;
                cursor: pointer;
                text-decoration: none;
                display: inline-block;
            }

            .empty-photos {
                text-align: center;
                padding: 40px 20px;
                color: #666;
            }

            .empty-icon {
                font-size: 48px;
                margin-bottom: 15px;
                opacity: 0.3;
            }
        </style>
    </th:block>
</head>
<body>
<th:block layout:fragment="content">
    <div class="profile-header">
        <h1 class="profile-name" th:text="${user.username}"></h1>

        <div class="profile-details">
                <span th:if="${user.userProfile != null && user.userProfile.sex != null}">
                    <strong>–ü–æ–ª:</strong>
                    <span th:text="${user.userProfile.sex == 'M' ? '–ú—É–∂—Å–∫–æ–π' : '–ñ–µ–Ω—Å–∫–∏–π'}"></span>
                </span>

            <span th:if="${user.userProfile != null && user.userProfile.birthDate != null}">
                    <strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong>
                    <span th:text="${user.userProfile.birthDate}"></span>
                </span>

            <span th:if="${user.userProfile != null && user.userProfile.location != null}">
                    <strong>–ú–µ—Å—Ç–æ:</strong>
                    <span th:text="${user.userProfile.location}"></span>
                </span>
        </div>

        <a th:href="@{/profile/edit}" class="edit-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
    </div>

    <!-- –ë–∏–æ–≥—Ä–∞—Ñ–∏—è -->
    <div th:if="${user.userProfile != null && user.userProfile.info != null}">
        <h3>–û —Å–µ–±–µ</h3>
        <p th:text="${user.userProfile.info}" style="line-height: 1.6; color: #555;"></p>
    </div>

    <!-- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ -->
    <div class="photos-section">
        <div class="section-title">
            <h3>–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</h3>
            <a th:href="@{/photos/download}" class="edit-btn">+ –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</a>
        </div>

        <div th:if="${photos != null && !photos.isEmpty()}">
            <div class="photos-grid">
                <div th:each="photo, iterStat : ${photos}">
                    <img th:src="${base64Images[iterStat.index]}"
                         th:alt="${photo.originFileName}"
                         class="photo-item">
                </div>
            </div>
        </div>

        <div th:if="${photos == null || photos.isEmpty()}" class="empty-photos">
            <div class="empty-icon">üì∑</div>
            <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π</p>
            <a th:href="@{/photos/download}" class="edit-btn" style="margin-top: 15px;">
                –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
            </a>
        </div>
    </div>
</th:block>
</body>
</html>